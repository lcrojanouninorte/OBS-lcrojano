<md-card class="  box-default md-whiteframe-2dp" layout="column">
    <md-card-header class="md-hue-2" style="padding-bottom: 0px!important;" md-colors="{background: 'indigo-A200'}">
        <md-card-avatar>
            <div class="progress-wrapper">
                <div>
                    <round-progress max="100" current="vm.result.progress" color="#45ccce" bgcolor="#eaeaea" radius="100" stroke="30" responsive="true" duration="800" animation="easeInOutQuart" animation-delay="10">
                    </round-progress>
                    <div class="text">{{vm.result.progress}}</div>
                </div>
            </div>
        </md-card-avatar>
        <md-card-header-text style="position: relative;">
            <span class="md-title" ng-click="vm.view_products = !vm.view_products">{{vm.result.titulo}}  <md-icon md-font-icon="ion-chevron-down" style="font-size:12px; color: white;"></md-icon></span>
            <span class="md-subhead" style="    color: rgb(255, 255, 255);"><b>Del {{vm.result.fecha_inicio| date:'yyyy-MM-dd'}} al {{vm.result.fecha_fin | date:'yyyy-MM-dd'}}</b></span>
            <span class="md-subhead">{{vm.result.total | currency}}</span>
        </md-card-header-text>
        <md-menu>
            <md-menu-content layout="row" style="    padding: 0px;     background-color: transparent;">
               
                <div layout-align="right" class="text-center">
                    <div>Asesor</div>
                    <md-checkbox class="result-color-{{vm.result.checkAsesor}}" aria-label="Checkbox 1" ng-model="vm.result.checkAsesor" ng-change="vm.update()" ng-true-value="1" ng-false-value="0" ng-disabled="vm.hasRole('empresario')">
                        {{vm.result.checkAsesor ? 'Verificado' : 'No Verificado' }}
                    </md-checkbox>
                </div>
                <div style="margin-left: 10px;"> </div>
                <div layout-align="right" class="text-center">
                    <div>Empresario</div>
                    <md-checkbox class="result-color-{{vm.result.checkEmpresario}}" aria-label="Checkbox 1" ng-model="vm.result.checkEmpresario" ng-change="vm.update()" ng-true-value="1" ng-false-value="0" ng-disabled="vm.hasRole('asesor')">
                        {{vm.result.checkEmpresario ? 'Finalizado' : 'En Ejecución' }}
                        <div>
                        </div>
                    </md-checkbox>
                </div>
            </md-menu-content>
        </md-menu>
    </md-card-header>
    <div layout="row" layout-padding>
        <div flex layout="row" layout-align="start center">
            <div layout="row">
                <md-tooltip md-direction="top">Indica que el producto aun no lo a empezado a ejecutar.</md-tooltip>
                <div class="cuadro color-3">
                    <md-icon ng-style="{'font-size':   '15px', 'line-height': '1', 'min-width': '0'} " md-font-icon="ion-ios-help-empty"></md-icon>
                </div>
                <div>
                    No Iniciado
                </div>
            </div>
            <div layout="row">
                <md-tooltip md-direction="top">Indica que actualmente se encuentra ejecutando este producto</md-tooltip>
                <div class="cuadro color-2 ">
                    <md-icon ng-style="{'font-size':   '15px', 'line-height': '1', 'min-width': '0'} " md-font-icon="ion-ios-help-empty"></md-icon>
                </div>
                <div>
                    En Ejecución
                </div>
            </div>
            <div layout="row">
                <md-tooltip md-direction="top"> Indica que ya ha finalizado el producto </md-tooltip>
                <div class="cuadro color-1">
                    <md-icon ng-style="{'font-size':   '15px', 'line-height': '1', 'min-width': '0'} " md-font-icon="ion-ios-help-empty"></md-icon>
                </div>
                <div>
                    Finalizado
                </div>
            </div>
        </div>
        <div flex class="text-right " layout-align="end center">
            Opciones:
            <md-button ng-if="vm.can( 'delete.project') " aria-label="Open phone interactions menu" class="md-icon-button" ng-click="vm.product_add_modal();">
                <md-tooltip md-direction="top">Añadir Producto</md-tooltip>
                <md-icon md-font-icon="ion-plus-round"></md-icon>
            </md-button>
            <md-button class="md-icon-button " aria-label="upload " ng-click="vm.upload_modal();">
                <md-tooltip md-direction="top">Subir Fuente de Verificación</md-tooltip>
                <md-icon md-font-icon="ion-paperclip "></md-icon>
            </md-button>
            <md-button ng-if="vm.can( 'edit.project') " class="md-icon-button " aria-label="edit " ng-click="vm.edit_result();">
                <md-tooltip md-direction="top">Editar</md-tooltip>
                <md-icon md-font-icon="ion-edit "></md-icon>
            </md-button>
            <!--<md-button class="md-icon-button " aria-label="view ">
            <md-icon md-font-icon="ion-eye "></md-icon>
        </md-button>-->
            <md-button ng-show="vm.can( 'delete.project') " class="md-icon-button " aria-label="delete " ng-click="vm.delete(vm.result.id) ">
                <md-tooltip md-direction="top">Borrar Resultado</md-tooltip>
                <md-icon md-font-icon="ion-trash-a "></md-icon>
            </md-button>
            <md-button class="md-icon-button md-mini md-primary" aria-label="Play" ng-click="vm.view_products = !vm.view_products">
                <md-tooltip md-direction="top">Ver Productos</md-tooltip>
                <md-icon md-font-icon="ion-chevron-down" style="font-size:14px"></md-icon>
            </md-button>
        </div>
    </div>
     
    <div ng-if="vm.view_products" class="products-list-wrapper fx-fade-down fx-fade-up-245">
        <product-list project-id="vm.result.project_id" result-id="vm.result.id " products="vm.result.products "></product-list>
    </div>
    <!--
    <md-card-actions layout="row " layout-align="center ">
        <div flex="33 ">
            <p class="text-bold ">
                <!--Estado : {{vm.process_id}}
        </div>
        <div class="text-right " flex="66 ">
            <h2 class="md-display-1 ">{{vm.result.total | currency}}</h2>
        </div>

    </md-card-actions> 
            </p>-->
</md-card>
<!--Modal formulario de creación de proyecto!-->
<script type="text/ng-template" id="UploadModal.html">
    <file-upload-form result="mvm.result" cancel="mvm.cancel()"></file-upload-form>
</script>
<script type="text/ng-template" id="ProductAddModal.html">
    <product-form project-id="mvm.result.project_id" result-id="mvm.result.id" product-list="mvm.result.products" cancel="mvm.cancel()"></product-form>
</script>
<!--Modal formulario de creación de proyecto!-->
<script type="text/ng-template" id="myModalResult.html">
    <div role="dialog" aria-label="Eat me!" layout="column" layout-align="center">
        <md-toolbar md-colors="{background: 'green'}">
            <div class="md-toolbar-tools">
                <h2><md-icon class="step img" md-font-icon="ion-ios-lightbulb-outline" aria-label="proyecto"></md-icon>Edita el Resultado! </h2>
            </div>
        </md-toolbar>
        <div layout="column" layout-margin>
            <p>Resultado: {{mvm.result.titulo}}</p>
            <result-form result="mvm.result" closeparent="mvm.cancel()" flex></result-form>
        </div>
        <div layout="row" class="demo-dialog-button">
            <md-button md-autofocus flex class="md-primary" ng-click="vm.closeDialog(); mvm.cancel()">
                Cancelar
            </md-button>
        </div>
    </div>
</script>
